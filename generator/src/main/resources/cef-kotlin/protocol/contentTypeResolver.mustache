package {{apiPackage}}.util

/**
 * Utility object for resolving MIME types (Content-Type) based on file extensions.
 *
 * This object provides a lightweight, file-extension-based approach to determining
 * the appropriate Content-Type header for HTTP responses serving static resources.
 * It supports common web assets including:
 * - Web documents (HTML, CSS, JavaScript, JSON)
 * - Images (PNG, JPEG, GIF, SVG, WebP)
 * - Fonts (WOFF, WOFF2, TTF, EOT)
 * - Documents (PDF, XML, TXT)
 * - Archives (ZIP)
 *
 * The resolver uses simple string suffix matching for performance. For unknown
 * file types, it returns `application/octet-stream` as a safe default.
 *
 * **Thread Safety:** This object is stateless and thread-safe.
 *
 * Auto-generated from OpenAPI specification.
 *
 * @see [Content-Type Header](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type)
 */
object ContentTypeResolver {

    // MIME type map for common file extensions
    private val MIME_TYPES = mapOf(
        ".html" to "text/html",
        ".js" to "application/javascript",
        ".css" to "text/css",
        ".json" to "application/json",
        ".svg" to "image/svg+xml",
        ".png" to "image/png",
        ".jpg" to "image/jpeg",
        ".jpeg" to "image/jpeg",
        ".gif" to "image/gif",
        ".webp" to "image/webp",
        ".woff2" to "font/woff2",
        ".woff" to "font/woff",
        ".ttf" to "font/ttf",
        ".eot" to "application/vnd.ms-fontobject",
        ".xml" to "application/xml",
        ".pdf" to "application/pdf",
        ".zip" to "application/zip",
        ".txt" to "text/plain"
    )

    /**
     * Resolves the appropriate MIME type based on the file extension in the given path.
     *
     * The method performs a case-sensitive suffix match on the provided path.
     * If no known extension is found, it returns `application/octet-stream`
     * as a generic binary content type.
     *
     * Supported extensions and their corresponding MIME types:
     * - .html -> text/html
     * - .js -> application/javascript
     * - .css -> text/css
     * - .json -> application/json
     * - .svg -> image/svg+xml
     * - .png -> image/png
     * - .jpg, .jpeg -> image/jpeg
     * - .gif -> image/gif
     * - .webp -> image/webp
     * - .woff2 -> font/woff2
     * - .woff -> font/woff
     * - .ttf -> font/ttf
     * - .eot -> application/vnd.ms-fontobject
     * - .xml -> application/xml
     * - .pdf -> application/pdf
     * - .zip -> application/zip
     * - .txt -> text/plain
     *
     * @param path the file path or URL from which to extract the extension.
     *             Must not be null. Can be a full path, relative path, or just a filename.
     * @return the MIME type corresponding to the file extension, or
     *         `application/octet-stream` if the extension is unknown
     * @throws NullPointerException if path is null
     *
     * @example
     * ```
     * ContentTypeResolver.resolve("index.html")        // returns "text/html"
     * ContentTypeResolver.resolve("/path/to/style.css") // returns "text/css"
     * ContentTypeResolver.resolve("data.json")          // returns "application/json"
     * ContentTypeResolver.resolve("unknown.xyz")        // returns "application/octet-stream"
     * ```
     */
    fun resolve(path: String): String {
        return MIME_TYPES.entries
            .firstOrNull { path.endsWith(it.key) }
            ?.value
            ?: "application/octet-stream"
    }
}
